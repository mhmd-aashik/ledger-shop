// Order Model - Customer orders
model Order {
  id          String   @id @default(cuid())
  orderNumber String   @unique
  
  // Customer Info
  userId      String?
  user        User?    @relation(fields: [userId], references: [id])
  
  // Customer Details (for guest orders)
  customerEmail    String
  customerName     String
  customerPhone    String?
  
  // Order Details
  status          OrderStatus @default(PENDING)
  paymentStatus   PaymentStatus @default(PENDING)
  fulfillmentStatus FulfillmentStatus @default(UNFULFILLED)
  
  // Pricing
  subtotal        Decimal @db.Decimal(10, 2)
  taxAmount       Decimal @db.Decimal(10, 2) @default(0)
  shippingAmount  Decimal @db.Decimal(10, 2) @default(0)
  discountAmount  Decimal @db.Decimal(10, 2) @default(0)
  totalAmount     Decimal @db.Decimal(10, 2)
  
  // Shipping
  shippingAddressId String?
  shippingAddress   Address? @relation("ShippingAddress", fields: [shippingAddressId], references: [id])
  
  // Payment
  paymentMethod    String?
  paymentReference String?
  paidAt          DateTime?
  
  // Fulfillment
  trackingNumber  String?
  shippedAt       DateTime?
  deliveredAt     DateTime?
  
  // Notes
  notes           String?
  internalNotes   String? // Internal notes for staff
  
  // Timestamps
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt

  // Relations
  items OrderItem[]

  @@map("orders")
}

enum OrderStatus {
  PENDING
  CONFIRMED
  PROCESSING
  SHIPPED
  DELIVERED
  CANCELLED
  REFUNDED
}

enum PaymentStatus {
  PENDING
  PAID
  FAILED
  REFUNDED
  PARTIALLY_REFUNDED
}

enum FulfillmentStatus {
  UNFULFILLED
  PARTIALLY_FULFILLED
  FULFILLED
  CANCELLED
}
